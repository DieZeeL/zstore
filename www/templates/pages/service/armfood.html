<html>
    <head>

    </head>
    <body>


        <form zippy="setupform">
            <h3>АРМ кассира</h3>
            <div class="row">
                <div class="col-12 col-md-6 col-xl-4">
                    <div class="form-group row ">
                        <label class="col-6 col-form-label" for="nal">Наличная касса</label>
                        <div class="col-6">
                            <select class="form-control" zippy="nal">
                                <option value="0">Не выбрана</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group row  ">
                        <label class="col-6 col-form-label" for="beznal">Безналичный счет</label>
                        <div class="col-6">
                            <select class="form-control" zippy="beznal">
                                <option value="0">Не выбран</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group  row ">
                        <label class="col-6 col-form-label" for="pos">POS терминал</label>
                        <div class="col-6">
                            <select class="form-control" zippy="pos">
                                <option value="0">Не выбран</option>
                            </select>
                        </div>
                    </div>


                    <div class="form-group row  ">
                        <label class="col-6 col-form-label"   for="store">Склад (кухня)</label>
                        <div class="col-6">
                            <select class="form-control" zippy="store">
                                <option value="0">Не выбран</option>
                            </select>
                        </div>
                    </div>


                    <div class="form-group   ">
                        <input type="submit" value="К заказам >"   class="btn btn-success">
                    </div>
                </div>

            </div>

        </form>


        <div   zippy="docpanel">
            <a zippy="toorderlist"><i class="fa fa-list"></i> Список заказов</a>
            <h4>Оформление  заказа</h4>
            
            
            <div class="row"  >
                <div class="col-12  col-xl-10"> 
                    
                    <div   zippy="catpan" class="row">
                        <div    class="col-12">
                         <i class="fa fa-arrow-alt-circle-left"></i><a  zippy="stopcat">К заказу</a>  
                         </div>
                        <div   zippy="catlist" class="col-12 col-sm-6 col-md-4  col-xl-3">
                            <div class="card mb-2" zippy="catbtn"  style="cursor:pointer" >

                                <table style="height:100%;width:100%;"  >
                                    <tr><td>
                                            <img zippy="catimage" style="height:100px "  >
                                        </td>
                                        <td valign="middle" align="left">

                                            <b   zippy="catname"> </b>
                                        </td></tr>
                                </table>  




                            </div>

                        </div >        
                    </div >        
                    <div   zippy="prodpan" class="row">
                        <div   zippy="prodlist" class="col-12 col-sm-6 col-md-4  col-xl-3">
                            <div class="card mb-2" zippy="prodbtn" style="cursor:pointer;;">
                                <table style="height:100%;width:100%;"  >
                                    <tr><td rowspan="2">
                                            <img zippy="prodimage" style="height:100px "  >
                                        </td>
                                        <td   align="left">

                                            <b   zippy="prodname"> </b> 

                                        </td></tr>
                                    <tr><td><b zippy="prodprice" style="font-size:large"></b></td></tr>

                                </table>  



                            </div>

                        </div >        
                    </div >        
                </div>   
                
                <div class="col-12 col-md-10 col-xl-8  ">         
                    
                    <div class="navbar mt-4">        
                        <form zippy="navform" class="form-inline   ">                   
                            <input  zippy="baddnewpos"  type="submit" value="Добавить позицию "   class="btn btn-info mr-4"> 
                            {{#usescanner}}
                            Штрих-код &nbsp;<input class="form-control"   style="width:150px;" autocomplete="off" autofocus type="text" zippy="barcode"
                                                   onkeydown="onBarCode()"> &nbsp;<a zippy="addcode" class="btn btn-info btn-sm mr-4">+</a>

                            {{/usescanner}}

                        </form> 
                    </div>           

                    <form zippy="listsform" >  
                        <div class="card">
                            <table class="table   " style="font-size:large">
                                <tr>
                                    <th>Наименование</th>
                                    <th>Код</th>
                                    <th class="text-right ">Кол.</th>
                                    <th class="text-right">Цена</th>
                                    <th class="text-right">Сумма</th>
                                    {{#pack}}
                                    <th class="text-center text-nowrap">С собой</th>
                                    {{/pack}}

                                    <th > </th>
                                </tr>
                                <tr zippy="itemlist"> 


                                    <td zippy="itemname"></td>
                                    <td zippy="item_code"></td>
                                    <td class="text-right text-nowrap">
                                        <a zippy="qtymin" class="btn btn-info btn-sm mr-1">-</a>
                                        <span zippy="qty"></span>
                                        <a zippy="qtyplus" class="btn btn-info  btn-sm ml-1">+</a>
                                    </td>
                                    <td zippy="price" class="text-right"></td>
                                    <td zippy="amount" class="text-right"></td>
                                    {{#pack}}
                                    <td class="text-center"> <a zippy="myselfon"><i class="fa fa-toggle-on text-success"></i></a> <a zippy="myselfoff"><i class="fa fa-toggle-off"></i></a> </td>
                                    {{/pack}}
                                    <td><a zippy="removeitem"  ><i class="fa fa-trash text-danger" ></i></a></td>
                                </tr>
                                <tr>
                                    <td colspan="4" class="text-right text-bold">Всего:</td>
                                    <td zippy="totalamount" class="text-right text-bold"></td>
                                    <td ></td>
                                    <td ></td>
                                </tr>
                            </table>
                        </div>
                        {{#tables}}
                        <div class="form-group row ">
                            <label class="col-6 col-md-3 col-xl-2 col-form-label" for="table">Номер  стола</label>
                            <div class="col-6 col-md-2 col-xl-1">
                                <input  zippy="table" class="form-control"  > 

                            </div>
                        </div>
                        {{/tables}}
                        <div class="form-group row ">
                            <label class="col-6 col-md-3 col-xl-2 col-form-label" for="notes">Коментарий</label>
                            <div class="col-6 col-md-5 col-xl-6">
                                <input  zippy="notes" class="form-control"  > 

                            </div>
                        </div>


                        <div class="form-group  ">

                            <input zippy="btopay" type="submit" value="К оплате "   class="btn btn-success mr-4">
                            
                            <input zippy="btodel" type="submit" value="Доставка"   class="btn btn-success mr-4">
                            
                            {{#hideblock}} 
                            <input zippy="btoprod" type="submit" value="В  производство "   class="btn btn-success mr-4">

                            
                            {{/hideblock}} 
                        </div>
                    </form>  
                </div>
                <div class="w-100"></div>  
                <div class="col-12   ">   
                    <form zippy="payform" class="row">

                        <div class="col-12 col-md-4 col-xl-3 mr-4 ">   
                            <div class="form-group   ">
                                <label   for="customer">Клиент</label>

                                <input  zippy="customer" class="form-control" placeholder="Начните  вводить..."  > 
                                <a zippy="addcust" >Добавить нового</a>

                            </div>
                            <div class="form-group   ">
                                <label for="pfamount"  >Сумма</label>

                                <input zippy="pfamount" readonly="readonly" style="width:100px;"  class="form-control  "  pattern="[0-9\.]+">

                            </div>
                            <div class="form-group   ">
                                <label  for="pfdisc"  >Скидка</label>

                                <input   autocomplete="off" zippy="pfdisc"  class="form-control  " style="width:100px;" pattern="[0-9\.]+">

                            </div>
                            <div class="form-group   ">
                                <label  for="pfforpay" >К оплате</label>

                                <input zippy="pfforpay" readonly="readonly" style="width:100px;" class="form-control  "  pattern="[0-9\.]+">

                            </div>
                        </div>
                        <div class="col-12 col-md-4 col-xl-3  ">  

                            <div class="form-group   ">
                                <label   >Тип  оплаты</label>
                                <br>

                                <div class="form-check form-check-inline">
                                    <input zippy="pfnal" class="form-check-input" type="radio"   >
                                    <label class="form-check-label" for="pfnal"><i class="fa fa-coins"></i> Наличные</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input zippy="pfbeznal" class="form-check-input" type="radio"    >
                                    <label class="form-check-label" for="pfbeznal"><i class="fa fa-credit-card"></i> Банк. карта</label>
                                </div>


                            </div>
                            <div class="form-group   ">
                                <label for="pfpayed"  >Внесена  оплата</label>

                                <input autocomplete="off" zippy="pfpayed" style="width:100px;" class="form-control  "  pattern="[0-9\.]+">

                            </div>
                            <div class="form-group   ">

                                <label for="pfrest"  >Здача   </label>

                                <input zippy="pfrest" style="width:100px;" class="form-control  "  pattern="[0-9\.]+">

                            </div>
                        </div>
                        <div class="col-12   ">  
                            <div class="form-group   ">
                                <a zippy="bbackitems" class="btn btn-outline-info"> &lt; Назад</a>

                                &nbsp;&nbsp; <input zippy="btocheck" type="submit" value="Печать чека > "   class="btn btn-success">
                            </div>
                        </div>

                    </form>     
                </div>
                <div class="w-100"></div>  
                <div class="col-12 col-md-8 col-xl-6  ">  
                    <div zippy="checkpan">

                        <div zippy="checktext"></div> 
                        <br>
                        <a onclick=" printpos()"  zippy="btoprint"  class="btn  btn-info">Печать</a>&nbsp;&nbsp;&nbsp;
                        <a zippy="bnewcheck"  class="btn  btn-success">Новый заказ</a> &nbsp;&nbsp;&nbsp;
                        {{#delivery}}       <a zippy="bnewdelivery" class="btn  btn-success">Новая доставка</a>       {{/delivery}} 
                    </div>
                </div> 

            </div  >    
        </div>



        <div class="row" zippy="orderlistpan">

            <div class="col-12 col-md-6 xl-4" >
                <h4>Список  заказов</h4>
                <a  class="btn btn-success" zippy="neworder">Новый заказ</a>  &nbsp;&nbsp;&nbsp;
                {{#delivery}}   <a  class="btn btn-success" zippy="newdelivery">Новая доставка</a>      {{/delivery}} 


                <div class="row"  >       
                    <div class="card">
                        <div class="card-body">
                            <div class="navbar nav">
                                <form zippy="searchform" class="form-inline ">
                                    <label for="searchnumber"> № </label>

                                    <input class="form-control mr-2" type="text" zippy="searchnumber" style="width:100px">

                                    <label for="searchcust"> Клиент </label>

                                    <input placeholder="Начните вводить..." class="form-control mr-2" type="text" zippy="searchcust"  >

                                    <input type="submit" class="  btn btn-outline-success  " value="Искать">


                                </form>
                            </div>
                        </div>
                    </div>
                </div>




                <table class="table  table-sm">
                    <tr>
                        <th>Дата</th>
                        <th>Номер</th>
                        {{#tables}}
                        <th>Стол</th>
                        {{/tables}}

                        {{#hideblock}} 
                        <th >Статус</th>


                        <th ></th>
                        <th ></th>
                        <th ></th>
                        {{/hideblock}}  
                        <th class="text-right">Сумма</th>

                        <th ></th>
                    </tr>
                    <tr zippy="orderlist">
                        <td zippy="docdate"  >   </td>

                        <td ><a zippy="docnumber"></a></td>
                        {{#tables}} <td zippy="tablenumber"></td>  {{/tables}}

                        <td class="text-nowrap  " zippy="state">  </td>
                        {{#hideblock}} 


                        <td ><i class="fa fa-blender"/></td>
                        <td ><i class="fa fa-credit-card" /></td>
                        <td ><i class="fa fa-dolly" />() </td>
                        {{/hideblock}}   
                        <td class="text-right" zippy="docamount"></td>

                        <td zippy="notes"></td>
                    </tr>

                </table>  <a id="dankor"></a>

                <div class="col-12 col-md-10 xl-8" > 
                    <div class="row" zippy="statuspan">


                        {{#hideblock}} 
                        <div class="card">
                            <div class="card-body">
                                <div class="navbar nav">
                                    <form zippy="statusform" class="form-inline ">
                                        <button zippy="bttn" type="submit" class="  btn btn-success  mr-2 ">Редактировать</button>
                                        <button zippy="bgar" type="submit" class="  btn btn-success  mr-2 ">В производство</button>
                                        <button zippy="bret" type="submit" class="  btn btn-success  mr-2 ">Оплатить</button>
                                        <button zippy="bret" type="submit" class="  btn btn-success  mr-2 ">Доставка</button>
                                        <button zippy="bret" type="submit" class="  btn btn-success  mr-2 ">Закрыть</button>
                                        <button zippy="bret" type="submit" class="  btn btn-success  mr-2 ">Аннулирован</button>


                                    </form>
                                </div>
                            </div>
                        </div>
                        {{/hideblock}}     


                        <div class="card">
                            <div class="card-body">
                                <div zippy="docview"></div>

                            </div>
                        </div>
                    </div>
                </div>




            </div>
        </div>

        <form zippy="editcust">
            <h3>&nbsp;Новый покупатель </h3>
            <div class="row">
                <div class="col-12 col-md-4 col-xl-3">

                    <div class="form-group">
                        <label for="editcustname">Имя </label>
                        <input class="form-control " zippy="editcustname" required="required"/>
                    </div>
                    <div class="form-group">
                        <label for="editphone">Телефон</label>
                        <input class="form-control" type="text" zippy="editphone"/>
                    </div>
                    <div class="form-group">
                        <label for="editaddress">Адрес</label>
                        <input class="form-control" type="text" zippy="editaddress"/>
                    </div>


                    <div class="form-group">
                        <input zippy="savecust" type="submit" value="Сохранить" class="btn btn-outline-primary">
                        <input type="button" zippy="cancelcust" value="Отменить" class="btn btn-light ">
                    </div>
                </div>
            </div>
        </form>


        <script>
            $(document).ready(function () {
                $('#pfpayed').focus();


                $("#pfdisc").change(function () {
                    var amount = $("#pfamount").val();
                    var paydisc = $("#pfdisc").val();
                    var payamount = parseFloat(amount) - parseFloat(paydisc);
                    $("#pfforpay").val(payamount.toFixed(2));

                });
                $("#pfpayed").change(function () {
                    var payed = $("#pfpayed").val();
                    var payamount = $("#pfforpay").val();
                    var exchange = parseFloat(payed) - parseFloat(payamount);
                    if (exchange > 0) {
                        $("#pfrest").val(exchange.toFixed(2));
                    } else {
                        $("#pfrest").val(0);
                    }

                });



            });





            function printpos() {
                $('#checktext').printThis();
            }

        </script>

        {{#usescanner}} 
        <script>


            $('#barcode').focus();


            function onBarCode(ele) {

                if (event.key === 'Enter' || event.keyCode == 13) {
                    // alert($('#barcode').val());
                    $('#addcode').click()
                }
            }
        </script>  



        {{/usescanner}} 
    </body>
</html>
